<app-container width="medium" class="person" *ngIf="person">
  <div class="image">
    <app-avatar [person]="person"></app-avatar>

    <button type="button" id="btn-menu" class="btn-icon" (click)="toggleMenu($event)">
      <fa-icon [fixedWidth]="true" [icon]="faBars"></fa-icon>
      <app-context-menu *ngIf="menuOpen" [personId]="person.id" [menu]="menu"></app-context-menu>
    </button>
  </div>


  <div class="info box">
    <dl>
      <ng-container>
        <dt>Name</dt>
        <dd>{{person.name}}</dd>
      </ng-container>

      <ng-container *ngIf="person.title">
        <dt>Titel</dt>
        <dd>{{person.title}}</dd>
      </ng-container>

      <ng-container *ngIf="person.birthyear || person.birthday">
        <dt>Geboren</dt>
        <dd>{{person.birthday}} {{person.birthyear}} BF</dd>
      </ng-container>

      <ng-container *ngIf="person.deathday">
        <dt>Gestorben</dt>
        <dd>{{person.deathday}} BF</dd>
      </ng-container>

      <ng-container *ngIf="person.race">
        <dt>Rasse</dt>
        <dd>{{person.race}}</dd>
      </ng-container>

      <ng-container *ngIf="person.culture">
        <dt>Kultur</dt>
        <dd>{{person.culture}}</dd>
      </ng-container>

      <ng-container *ngIf="person.profession">
        <dt>Profession</dt>
        <dd>{{person.profession}}</dd>
      </ng-container>

      <ng-container *ngIf="person.height">
        <dt>Größe</dt>
        <dd>{{person.height / 100 | number: '1.2-2': 'de'}} m</dd>
      </ng-container>
    </dl>

    <div class="tags" *ngIf="person.tags">
      <span class="tag" *ngFor="let tag of person.tags">{{tag}}</span>
    </div>
  </div>

  <div *ngIf="values$ | async as values" class="values">
    <div *ngIf="values.attributes && values.attributes.length > 0" class="attributes">
      <app-bar *ngFor="let bar of values.attributes"
               [bar]="bar"
               (barClicked)="editAttribute(bar)"
      ></app-bar>
    </div>
  </div>

  <div class="detail-info" *ngIf="infos$">
    <app-info-box *ngFor="let infoList of infos$ | async | keyvalue"
                  [key]="infoList.key"
                  [infos]="infoList.value"
                  (editDetail)="editDetail($event)"
    ></app-info-box>
  </div>
</app-container>
